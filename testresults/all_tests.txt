################## TESTING CALLIOPEO.PY ##################
Test started: Wed 18 Aug 16:03:52 UTC 2021
Selected Tests: "1" "2" "3" "4" "5" "6" "7" "8" "9" "10" "11" "12" "13" "14" "15"

[0;32mStart #1 ./testcases/01_collect-sysinfo.sh[0m
---------------------------------
  Hostname: astropiir
  User: calliope
  Group membership: calliope dialout
  Working directory: /home/calliope/calliopEO
  System info: Linux astropiir 5.10.17-v7+ #1421 SMP Thu May 27 13:59:01 BST 2021 armv7l GNU/Linux
  OS Release:
    PRETTY_NAME="Raspbian GNU/Linux 10 (buster)"
    NAME="Raspbian GNU/Linux"
    VERSION_ID="10"
    VERSION="10 (buster)"
    VERSION_CODENAME=buster
    ID=raspbian
    ID_LIKE=debian
    HOME_URL="http://www.raspbian.org/"
    SUPPORT_URL="http://www.raspbian.org/RaspbianForums"
    BUG_REPORT_URL="http://www.raspbian.org/RaspbianBugs"

  Python3 version: Python 3.7.3
  Installed Python3 modules
    Package         Version
    --------------- ---------
    asn1crypto      0.24.0
    bcrypt          3.2.0
    birthday        1.1.1
    blkinfo         0.1.2
    cffi            1.14.5
    colorzero       1.1
    cryptography    2.6.1
    evdev           1.1.2
    GDAL            2.4.0
    gpiozero        1.6.2
    logzero         1.6.3
    mcpcron         2.0.7
    menu            1.0.4
    numpy           1.16.2
    olefile         0.46
    paramiko        2.7.2
    picamera        1.13
    Pillow          5.4.1
    pip             18.1
    pisense         0.2
    profileswitcher 1.2.1
    pycparser       2.20
    PyGObject       3.30.4
    PyNaCl          1.4.0
    pyserial        3.5
    pysftp          0.2.9
    python-apt      1.8.4.3
    pyxdg           0.25
    RPi.GPIO        0.7.0
    RTIMULib        7.2.1
    SecretStorage   2.3.1
    selftest        2.1.4
    sense-hat       2.3.0
    setuptools      40.8.0
    six             1.12.0
    smbus           1.1.post2
    spidev          3.5
    statusserver    2.0.0
    stealthmode     1.1.0
    ws4py           0.5.1
[0;42mTestcase passed.[0m
---------------------------------
[1;33mFinished #1 ./testcases/01_collect-sysinfo.sh[0m


[0;32mStart #2 ./testcases/02_no-calliope.sh[0m
---------------------------------
Test: No Calliope attached
---------------------------------------

-=# CalliopEO #=-
mini not found
Check 1/1: Return code of script is 10 or 11 ... [0;32mPASSED[0m
[0;42mTestcase passed.[0m
---------------------------------
[1;33mFinished #2 ./testcases/02_no-calliope.sh[0m


[0;32mStart #3 ./testcases/03_no-zip.sh[0m
---------------------------------
Test: No ZIP artchive provided
---------------------------------------

-=# CalliopEO #=-
no archives found in this directory
make sure you have at least one archive in this directory
Check 1/1: Return code of script is 12 ... [0;32mPASSED[0m
[0;42mTestcase passed.[0m
---------------------------------
[1;33mFinished #3 ./testcases/03_no-zip.sh[0m


[0;32mStart #4 ./testcases/04_transmission-5s.sh[0m
---------------------------------
Test: Single, nominal ZIP archive provided
-------------------------------------------

-=# CalliopEO #=-
Unpacked /home/calliope/calliopEO/01.zip


programming: /home/calliope/calliopEO/run_20210818-160435/01.hex
done
open serial port
Calliope Mini found on /dev/ttyACM0  ..........
done
reading data

Start @ 2021/08/18-16:04:52; Will stop @ 2021/08/18-19:09:52

Sending @START@

Received @START@
******
done
############################################################################################################

Check 1/4: Return code of script is 0 ... [0;32mPASSED[0m
Check 2/4: ZIP archive renamed to .done ... [0;32mPASSED[0m
Check 3/4: Folder run_* created ... [0;32mPASSED[0m
Check 4/4: MD5 checksum in folder ./run_20210818-160435 ... [0;32mPASSED[0m
[0;42mTestcase passed.[0m
---------------------------------
[1;33mFinished #4 ./testcases/04_transmission-5s.sh[0m


[0;32mStart #5 ./testcases/05_corrupted_hex.sh[0m
---------------------------------
Test: Provide two ZIP archive, the last one corrupted
-----------------------------------------------------

-=# CalliopEO #=-
Unpacked /home/calliope/calliopEO/01.zip


programming: /home/calliope/calliopEO/run_20210818-160500/01.hex
done
open serial port
Calliope Mini found on /dev/ttyACM0  ..........
done
reading data

Start @ 2021/08/18-16:05:16; Will stop @ 2021/08/18-19:10:16

Sending @START@

Received @START@
******
done
############################################################################################################

programming: /home/calliope/calliopEO/run_20210818-160500/02.hex
done
open serial port
Calliope Mini found on /dev/ttyACM0  ..........
done
reading data

Start @ 2021/08/18-16:05:32; Will stop @ 2021/08/18-19:10:32

Sending @START@

Received @START@
******
done
############################################################################################################

Check 1/6: Return code of script is 0 ... [0;32mPASSED[0m
Check 2/6: ZIP archive renamed to .done ... [0;32mPASSED[0m
Check 3/6: Folder run_* created ... [0;32mPASSED[0m
Check 4/6: Created two .data files ... [0;32mPASSED[0m
Check 5/6: The two .data files have same content ... [0;32mPASSED[0m
Check 6/6: MD5 checksum in folder ./run_20210818-160500 ... [0;32mPASSED[0m
[0;42mTestcase passed.[0m
---------------------------------
[1;33mFinished #5 ./testcases/05_corrupted_hex.sh[0m


[0;32mStart #6 ./testcases/06a_corrupted-zip.sh[0m
---------------------------------
Test: Provide three ZIP archive, the 2nd corrupted
--------------------------------------------------

-=# CalliopEO #=-
Error while unpacking /home/calliope/calliopEO/not.a.zip: /home/calliope/calliopEO/not.a.zip is not a zip file


Check 1/3: Return code is 0 ... [0;32mPASSED[0m
Check 2/3: ZIP archive renamed to .failed ... [0;32mPASSED[0m
Check 3/3: Empty folder run_* created ... [0;32mPASSED[0m
[0;42mTestcase passed.[0m
---------------------------------
[1;33mFinished #6 ./testcases/06a_corrupted-zip.sh[0m


[0;32mStart #7 ./testcases/06b_corrupted-zip.sh[0m
---------------------------------
Test: Provide three ZIP archive, the 2nd corrupted
--------------------------------------------------

-=# CalliopEO #=-
Unpacked /home/calliope/calliopEO/01.zip
Error while unpacking /home/calliope/calliopEO/02.zip: /home/calliope/calliopEO/02.zip is not a zip file
Unpacked /home/calliope/calliopEO/03.zip


programming: /home/calliope/calliopEO/run_20210818-160544/01.hex
done
open serial port
Calliope Mini found on /dev/ttyACM0  ..........
done
reading data

Start @ 2021/08/18-16:06:01; Will stop @ 2021/08/18-19:11:01

Sending @START@

Received @START@
******
done
############################################################################################################

programming: /home/calliope/calliopEO/run_20210818-160544/02.hex
done
open serial port
Calliope Mini found on /dev/ttyACM0  ..........
done
reading data

Start @ 2021/08/18-16:06:23; Will stop @ 2021/08/18-19:11:23

Sending @START@

Received @START@
******
done
############################################################################################################

Check 1/5: Return code is 0 ... [0;32mPASSED[0m
Check 2/5: ZIP archive renamed to .failed ... [0;32mPASSED[0m
Check 3/5: Folder run_* created ... [0;32mPASSED[0m
Check 4/5: Created two .data files ... [0;32mPASSED[0m
Check 5/5: MD5 checksum in folder ./run_20210818-160544 ... [0;32mPASSED[0m
[0;42mTestcase passed.[0m
---------------------------------
[1;33mFinished #7 ./testcases/06b_corrupted-zip.sh[0m


[0;32mStart #8 ./testcases/07a_transm-timeout.sh[0m
---------------------------------
Test: Handle transmission timeout
---------------------------------

-=# CalliopEO #=-
Unpacked /home/calliope/calliopEO/01.zip


programming: /home/calliope/calliopEO/run_20210818-160631/01.hex
done
open serial port
Calliope Mini found on /dev/ttyACM0  ..........
done
reading data

Start @ 2021/08/18-16:06:47; Will stop @ 2021/08/18-16:07:22

Sending @START@

Received @START@
**********************************
Max script time achieved

done
############################################################################################################

Check 1/6: Return code is 0 ... [0;32mPASSED[0m
Check 2/6: ZIP archive renamed to .done ... [0;32mPASSED[0m
Check 3/6: Folder run_* created ... [0;32mPASSED[0m
Check 4/6: Created two .data files ... [0;32mPASSED[0m
Check 5/6: Check .data file in ./run_20210818-160631 ... [0;32mPASSED[0m
Check 6/6: Transmission terminated in time ... [0;32mPASSED[0m
[0;42mTestcase passed.[0m
---------------------------------
[1;33mFinished #8 ./testcases/07a_transm-timeout.sh[0m


[0;32mStart #9 ./testcases/07b_transm-timeout.sh[0m
---------------------------------
Test: Continue with next hex after timeout
------------------------------------------

-=# CalliopEO #=-
Unpacked /home/calliope/calliopEO/01.zip


programming: /home/calliope/calliopEO/run_20210818-160725/01.hex
done
open serial port
Calliope Mini found on /dev/ttyACM0  ..........
done
reading data

Start @ 2021/08/18-16:07:41; Will stop @ 2021/08/18-16:08:16

Sending @START@

Received @START@
**********************************
Max script time achieved

done
############################################################################################################

programming: /home/calliope/calliopEO/run_20210818-160725/02.hex
done
open serial port
Calliope Mini found on /dev/ttyACM0  ..........
done
reading data

Start @ 2021/08/18-16:08:33; Will stop @ 2021/08/18-16:09:08

Sending @START@

Received @START@
******
done
############################################################################################################

Check 1/5: Return code is 0 ... [0;32mPASSED[0m
Check 2/5: ZIP archive renamed to .done ... [0;32mPASSED[0m
Check 3/5: Folder run_* created ... [0;32mPASSED[0m
Check 4/5: Created two .data files ... [0;32mPASSED[0m
Check 5/5: Check .data file in ./run_20210818-160725 ... [0;32mPASSED[0m
[0;42mTestcase passed.[0m
---------------------------------
[1;33mFinished #9 ./testcases/07b_transm-timeout.sh[0m


[0;32mStart #10 ./testcases/08a_data-limit.sh[0m
---------------------------------
Test: Handle data limit threshold
---------------------------------

-=# CalliopEO #=-
Unpacked /home/calliope/calliopEO/01.zip


programming: /home/calliope/calliopEO/run_20210818-160841/01.hex
done
open serial port
Calliope Mini found on /dev/ttyACM0  ..........
done
reading data

Start @ 2021/08/18-16:08:57; Will stop @ 2021/08/18-19:13:57

Sending @START@

Received @START@
*******************************************************************************************************************************************************************************************************************
Max file size achieved

done
############################################################################################################

Check 1/6: Return code is 0 ... [0;32mPASSED[0m
Check 2/6: ZIP archive renamed to .done ... [0;32mPASSED[0m
Check 3/6: Folder run_* created ... [0;32mPASSED[0m
Check 4/6: Created two .data files ... [0;32mPASSED[0m
Check 5/6: MD5 checksum in folder ./run_20210818-160841 ... [0;32mPASSED[0m
Check 6/6: First .data meets the size threshold (8000 bytes) ... [0;32mPASSED[0m
[0;42mTestcase passed.[0m
---------------------------------
[1;33mFinished #10 ./testcases/08a_data-limit.sh[0m


[0;32mStart #11 ./testcases/08b_data-limit.sh[0m
---------------------------------
Test: Handle data limit treshold
--------------------------------

-=# CalliopEO #=-
Unpacked /home/calliope/calliopEO/01.zip


programming: /home/calliope/calliopEO/run_20210818-160920/01.hex
done
open serial port
Calliope Mini found on /dev/ttyACM0  ..........
done
reading data

Start @ 2021/08/18-16:09:37; Will stop @ 2021/08/18-19:14:37

Sending @START@

Received @START@
*******************************************************************************************************************************************************************************************************************
Max file size achieved

done
############################################################################################################

programming: /home/calliope/calliopEO/run_20210818-160920/02.hex
done
open serial port
Calliope Mini found on /dev/ttyACM0  ..........
done
reading data

Start @ 2021/08/18-16:10:13; Will stop @ 2021/08/18-19:15:13

Sending @START@

Received @START@
******
done
############################################################################################################

Check 1/6: Return code is 0 ... [0;32mPASSED[0m
Check 2/6: ZIP archive renamed to .done ... [0;32mPASSED[0m
Check 3/6: Folder run_* created ... [0;32mPASSED[0m
Check 4/6: Created two .data files ... [0;32mPASSED[0m
Check 5/6: MD5 checksum in folder ./run_20210818-160920 ... [0;32mPASSED[0m
Check 6/6: First .data meets the size threshold (8000 bytes) ... [0;32mPASSED[0m
[0;42mTestcase passed.[0m
---------------------------------
[1;33mFinished #11 ./testcases/08b_data-limit.sh[0m


[0;32mStart #12 ./testcases/09a_transmission-no-start.sh[0m
---------------------------------
Test: Hex File without sending @START@, but send other data.
-------------------------------------------

-=# CalliopEO #=-
Unpacked /home/calliope/calliopEO/01.zip


programming: /home/calliope/calliopEO/run_20210818-161021/01.hex
done
open serial port
Calliope Mini found on /dev/ttyACM0  ..........
done
reading data

Start @ 2021/08/18-16:10:37; Will stop @ 2021/08/18-19:15:37

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Something went wrong. Retrying flashing (2/3)
programming: /home/calliope/calliopEO/run_20210818-161021/01.hex
done
open serial port
Calliope Mini found on /dev/ttyACM0  ..........
done
reading data

Start @ 2021/08/18-16:11:04; Will stop @ 2021/08/18-19:16:04

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Something went wrong. Retrying flashing (3/3)
programming: /home/calliope/calliopEO/run_20210818-161021/01.hex
done
open serial port
Calliope Mini found on /dev/ttyACM0  ..........
done
reading data

Start @ 2021/08/18-16:11:30; Will stop @ 2021/08/18-19:16:30

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@
Check 1/5: Return code of script is 0 ... [0;32mPASSED[0m
Check 2/5: ZIP archive renamed to .done ... [0;32mPASSED[0m
Check 3/5: Folder run_* created ... [0;32mPASSED[0m
Check 4/5: MD5 checksum in folder ./run_20210818-161021 ... [0;32mPASSED[0m
Check 5/5: Created no .data files ... [0;32mPASSED[0m
[0;42mTestcase passed.[0m
---------------------------------
[1;33mFinished #12 ./testcases/09a_transmission-no-start.sh[0m


[0;32mStart #13 ./testcases/09b_transmission-no-start.sh[0m
---------------------------------
Test: Hex File without sending @START@, but send other data.
-------------------------------------------

-=# CalliopEO #=-
Unpacked /home/calliope/calliopEO/01.zip


programming: /home/calliope/calliopEO/run_20210818-161143/01.hex
done
open serial port
Calliope Mini found on /dev/ttyACM0  ..........
done
reading data

Start @ 2021/08/18-16:11:59; Will stop @ 2021/08/18-19:16:59

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Something went wrong. Retrying flashing (2/3)
programming: /home/calliope/calliopEO/run_20210818-161143/01.hex
done
open serial port
Calliope Mini found on /dev/ttyACM0  ..........
done
reading data

Start @ 2021/08/18-16:12:25; Will stop @ 2021/08/18-19:17:25

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Something went wrong. Retrying flashing (3/3)
programming: /home/calliope/calliopEO/run_20210818-161143/01.hex
done
open serial port
Calliope Mini found on /dev/ttyACM0  ..........
done
reading data

Start @ 2021/08/18-16:12:51; Will stop @ 2021/08/18-19:17:51

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@

Sending @START@
programming: /home/calliope/calliopEO/run_20210818-161143/02.hex
done
open serial port
Calliope Mini found on /dev/ttyACM0  ..........
done
reading data

Start @ 2021/08/18-16:13:17; Will stop @ 2021/08/18-19:18:17

Sending @START@

Received @START@
******
done
############################################################################################################

Check 1/5: Return code of script is 0 ... [0;32mPASSED[0m
Check 2/5: ZIP archive renamed to .done ... [0;32mPASSED[0m
Check 3/5: Folder run_* created ... [0;32mPASSED[0m
Check 4/5: MD5 checksum in folder ./run_20210818-161143 ... [0;32mPASSED[0m
Check 5/5: Created one .data files ... [0;32mPASSED[0m
[0;42mTestcase passed.[0m
---------------------------------
[1;33mFinished #13 ./testcases/09b_transmission-no-start.sh[0m


[0;32mStart #14 ./testcases/10_multi.sh[0m
---------------------------------
Test: Multi, provice two Zip containing three Hex
-------------------------------------------

-=# CalliopEO #=-
Unpacked /home/calliope/calliopEO/01.zip
Unpacked /home/calliope/calliopEO/02.zip


programming: /home/calliope/calliopEO/run_20210818-161326/01.hex
done
open serial port
Calliope Mini found on /dev/ttyACM0  ..........
done
reading data

Start @ 2021/08/18-16:13:42; Will stop @ 2021/08/18-19:18:42

Sending @START@

Received @START@
******
done
############################################################################################################

programming: /home/calliope/calliopEO/run_20210818-161326/02.hex
done
open serial port
Calliope Mini found on /dev/ttyACM0  ..........
done
reading data

Start @ 2021/08/18-16:14:04; Will stop @ 2021/08/18-19:19:04

Sending @START@

Received @START@
******
done
############################################################################################################

programming: /home/calliope/calliopEO/run_20210818-161326/03.hex
done
open serial port
Calliope Mini found on /dev/ttyACM0  ..........
done
reading data

Start @ 2021/08/18-16:14:26; Will stop @ 2021/08/18-19:19:26

Sending @START@

Received @START@
******
done
############################################################################################################

Check 1/5: Return code of script is 0 ... [0;32mPASSED[0m
Check 2/5: ZIP archive renamed to .done ... [0;32mPASSED[0m
Check 3/5: Folder run_* created ... [0;32mPASSED[0m
Check 4/5: Created three .data files ... [0;32mPASSED[0m
Check 5/5: MD5 checksum in folder ./run_20210818-161326 ... [0;32mPASSED[0m
[0;42mTestcase passed.[0m
---------------------------------
[1;33mFinished #14 ./testcases/10_multi.sh[0m


[0;32mStart #15 ./testcases/11_no-crlf.sh[0m
---------------------------------
Test: Handle data without newline
---------------------------------

-=# CalliopEO #=-
Unpacked /home/calliope/calliopEO/01.zip


programming: /home/calliope/calliopEO/run_20210818-161433/01.hex
done
open serial port
Calliope Mini found on /dev/ttyACM0  ..........
done
reading data

Start @ 2021/08/18-16:14:49; Will stop @ 2021/08/18-19:19:49

Sending @START@

Received @START@
*********************
done
############################################################################################################

Check 1/6: Return code is 0 ... [0;32mPASSED[0m
Check 2/6: ZIP archive renamed to .done ... [0;32mPASSED[0m
Check 3/6: Folder run_* created ... [0;32mPASSED[0m
Check 4/6: Created .data files ... [0;32mPASSED[0m
Check 5/6: MD5 checksum in folder ./run_20210818-161433 ... [0;32mPASSED[0m
[0;42mTestcase passed.[0m
---------------------------------
[1;33mFinished #15 ./testcases/11_no-crlf.sh[0m

[0;42m

          Test ended: Wed 18 Aug 16:15:01 UTC 2021

          15 FINISHED
          15 PASSED
          0 NOT PASSED

[0m
